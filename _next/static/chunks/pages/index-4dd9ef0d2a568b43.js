(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(420)}])},420:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var n=t(5893),s=t(7294);function a(e,r,t,n,s,a,u){try{var o=e[a](u),c=o.value}catch(i){t(i);return}o.done?r(c):Promise.resolve(c).then(n,s)}function u(e){return function(){var r=this,t=arguments;return new Promise(function(n,s){var u=e.apply(r,t);function o(e){a(u,n,s,o,c,"next",e)}function c(e){a(u,n,s,o,c,"throw",e)}o(void 0)})}}var o=t(7582);function c(e){var r,t=e.onWriteAccess,a=e.onReadAccess,c=(0,s.useState)(""),i=c[0],l=c[1],d=(0,s.useState)(""),m=d[0],h=d[1],p=(r=u(function(e,r){var n,s;return(0,o.__generator)(this,function(n){switch(n.label){case 0:e.preventDefault(),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch("/api/verify-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:r,password:i})})];case 2:return[4,n.sent().json()];case 3:return n.sent().isValid?"write"===r?t():a():h("Invalid password"),[3,5];case 4:return n.sent(),h("An error occurred. Please try again."),[3,5];case 5:return[2]}})}),function(e,t){return r.apply(this,arguments)});return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("form",{onSubmit:function(e){return p(e,"write")},className:"mb-4",children:[(0,n.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},placeholder:"Enter write password",className:"border p-2 mr-2 rounded"}),(0,n.jsx)("button",{type:"submit",className:"bg-amber-600 text-white px-4 py-2 rounded hover:bg-amber-700 transition",children:"Write Access"})]}),(0,n.jsxs)("form",{onSubmit:function(e){return p(e,"read")},children:[(0,n.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},placeholder:"Enter read password",className:"border p-2 mr-2 rounded"}),(0,n.jsx)("button",{type:"submit",className:"bg-amber-500 text-white px-4 py-2 rounded hover:bg-amber-600 transition",children:"Read Access"})]}),m&&(0,n.jsx)("p",{className:"text-red-500 mt-2",children:m})]})}function i(){var e,r=(0,s.useState)(""),t=r[0],a=r[1],c=(0,s.useState)(""),i=c[0],l=c[1],d=(e=u(function(e){var r,n;return(0,o.__generator)(this,function(r){switch(r.label){case 0:e.preventDefault(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch("/api/autographs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,message:i})})];case 2:return r.sent().ok?(alert("Autograph submitted successfully!"),a(""),l("")):alert("Failed to submit autograph. Please try again."),[3,4];case 3:return n=r.sent(),console.error("Error submitting autograph:",n),alert("An error occurred. Please try again."),[3,4];case 4:return[2]}})}),function(r){return e.apply(this,arguments)});return(0,n.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"name",className:"block mb-1 text-amber-800",children:"Name:"}),(0,n.jsx)("input",{id:"name",type:"text",value:t,onChange:function(e){return a(e.target.value)},required:!0,className:"w-full border p-2 rounded"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"message",className:"block mb-1 text-amber-800",children:"Message:"}),(0,n.jsx)("textarea",{id:"message",value:i,onChange:function(e){return l(e.target.value)},required:!0,className:"w-full border p-2 rounded",rows:4})]}),(0,n.jsx)("button",{type:"submit",className:"bg-amber-600 text-white px-4 py-2 rounded hover:bg-amber-700 transition",children:"Submit Autograph"})]})}function l(){var e=(0,s.useState)([]),r=e[0],t=e[1];return(0,s.useEffect)(function(){var e;(e=u(function(){var e,r,n;return(0,o.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,fetch("/api/autographs")];case 1:if(!(e=r.sent()).ok)return[3,3];return[4,e.json()];case 2:return t(r.sent()),[3,4];case 3:console.error("Failed to fetch autographs"),r.label=4;case 4:return[3,6];case 5:return n=r.sent(),console.error("Error fetching autographs:",n),[3,6];case 6:return[2]}})}),function(){return e.apply(this,arguments)})()},[]),(0,n.jsx)("div",{className:"space-y-4",children:r.map(function(e){return(0,n.jsxs)("div",{className:"border p-4 rounded bg-amber-50",children:[(0,n.jsx)("h3",{className:"font-bold text-amber-800",children:e.name}),(0,n.jsx)("p",{className:"text-amber-700",children:e.message}),(0,n.jsxs)("p",{className:"text-sm text-amber-500",children:["Signed on: ",new Date(e.createdAt).toLocaleDateString()]})]},e._id)})})}function d(){var e=(0,s.useState)(!1),r=e[0],t=e[1],a=(0,s.useState)(!1),u=a[0],o=a[1];return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-amber-100 to-amber-200",children:(0,n.jsxs)("main",{className:"bg-white p-8 rounded-lg shadow-2xl max-w-4xl w-full",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold mb-6 text-center text-amber-800",children:"Treasured Scribbles"}),!r&&!u&&(0,n.jsx)(c,{onWriteAccess:function(){return t(!0)},onReadAccess:function(){return o(!0)}}),r&&(0,n.jsx)(i,{}),u&&(0,n.jsx)(l,{})]})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);